class HappUrlGenerator:
    """Генератор ссылок через GitHub Pages"""
    
    GITHUB_PAGES_URL = "https://ваш-логин.github.io/happ-import-worker"
    
    @staticmethod
    def generate_happ_url(vless_url: str, name: str = "VLESS VPN") -> str:
        try:
            import base64, json
            
            # Создаем конфиг
            config = {
                "configs": [{
                    "core": "v2ray",
                    "remark": name[:50],
                    "config": vless_url
                }]
            }
            
            # Конвертируем в Base64
            config_json = json.dumps(config, ensure_ascii=False)
            config_b64 = base64.b64encode(config_json.encode()).decode('utf-8')
            
            # URL для GitHub Pages
            url = f"{HappUrlGenerator.GITHUB_PAGES_URL}/?config={config_b64}"
            
            return url
        except Exception as e:
            logger.error(f"Ошибка генерации URL: {e}")
            return vless_url
